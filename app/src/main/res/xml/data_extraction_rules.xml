<?xml version="1.0" encoding="utf-8"?>
<!--
  Data extraction rules for Android 12+ (API 31+) backup and device-to-device transfer.

  App data storage:
  - Preferences DataStore (datastore/settings.preferences_pb): User settings
    (theme, call action, UUID, debug logging, etc.)
  - Proto DataStore (datastore/cache_store.db): Current playing track cache (transient)
  - Room Database (cache.db): Library cache and connection settings

  Cloud backup: Include user settings and connection configuration.
  Device transfer: Include settings only (database excluded by not including it).

  Note: Client UUID is stored in DataStore. While ideally each device should
  have a unique UUID, the MusicBee plugin handles duplicate connections gracefully.
-->
<data-extraction-rules>
  <cloud-backup>
    <!-- Include DataStore preferences for user settings -->
    <include domain="file" path="datastore/settings.preferences_pb" />
    <!-- Include database for connection settings -->
    <include domain="database" path="." />
  </cloud-backup>
  <device-transfer>
    <!--
      Only include DataStore preferences for user settings.
      Database is excluded (not included) because:
      - Library data (genres, artists, albums, tracks) will be re-synced from server
      - Connection settings may need reconfiguration for new device's network
    -->
    <include domain="file" path="datastore/settings.preferences_pb" />
  </device-transfer>
</data-extraction-rules>
